# Standalone PowerON Bot

–û–∫—Ä–µ–º–∏–π Telegram-–±–æ—Ç –¥–ª—è –ø–µ—Ä–µ–≥–ª—è–¥—É –≥—Ä–∞—Ñ—ñ–∫—ñ–≤ –≤—ñ–¥–∫–ª—é—á–µ–Ω—å –∑ `poweron.toe.com.ua`.

## –©–æ –≤–º—ñ—î –±–æ—Ç

- –ü–æ–∫—Ä–æ–∫–æ–≤–∏–π –ø–æ—à—É–∫ –∞–¥—Ä–µ—Å–∏: **–Ω–∞—Å–µ–ª–µ–Ω–∏–π –ø—É–Ω–∫—Ç ‚Üí –≤—É–ª–∏—Ü—è ‚Üí –±—É–¥–∏–Ω–æ–∫**.
- –û—Ç—Ä–∏–º–∞–Ω–Ω—è —Ç–∞ –≤—ñ–¥–ø—Ä–∞–≤–∫–∞ —Å–∫—Ä—ñ–Ω—à–æ—Ç–∞ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞ –≥—Ä–∞—Ñ—ñ–∫–∞ –≤—ñ–¥–∫–ª—é—á–µ–Ω—å.
- –ü–æ–∫–∞–∑ —á–µ—Ä–≥–∏ –∑ API (–ª–∏—à–µ –ì–ü–í).
- –Ü—Å—Ç–æ—Ä—ñ—è –æ—Å—Ç–∞–Ω–Ω—ñ—Ö 6 –∞–¥—Ä–µ—Å.
- –ó–∞–∫—Ä—ñ–ø–ª–µ–Ω–Ω—è –¥–æ 6 –∞–¥—Ä–µ—Å –¥–ª—è —à–≤–∏–¥–∫–æ–≥–æ –¥–æ—Å—Ç—É–ø—É.
- –ï–∫—Ä–∞–Ω **‚öôÔ∏è –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è** –∑ –∫–µ—Ä—É–≤–∞–Ω–Ω—è–º –∞–≤—Ç–æ–æ–Ω–æ–≤–ª–µ–Ω–Ω—è–º.
- –ö–Ω–æ–ø–∫–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –¥–ª—è —è–∫–æ—Å—Ç—ñ —Å–µ—Ä–≤—ñ—Å—É: **‚≠ê –û—Ü—ñ–Ω–∏—Ç–∏ –±–æ—Ç–∞** —Ç–∞ **üìù –ó–≤–æ—Ä–æ—Ç–Ω—ñ–π –∑–≤'—è–∑–æ–∫**.
- –ö–æ–º–∞–Ω–¥–∏ `/status` —ñ `/faq` –¥–ª—è —à–≤–∏–¥–∫–æ–≥–æ –ø–µ—Ä–µ–≥–ª—è–¥—É —Å—Ç–∞–Ω—É —Ç–∞ –¥–æ–≤—ñ–¥–∫–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞.
- Self-test –∫–æ–º–∞–Ω–¥–∏ –¥–ª—è –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∞: `/selftest_logs` (—Ç–µ—Å—Ç –∑–∞–ø–∏—Å—É –ª–æ–≥—ñ–≤) —ñ `/selftest_plot` (—Ç–µ—Å—Ç PNG-–≥—Ä–∞—Ñ—ñ–∫–∞ –≤ headless —Ä–µ–∂–∏–º—ñ).
- –ö–æ–º–∞–Ω–¥–∞ `/download_logs` –Ω–∞–¥—Å–∏–ª–∞—î –Ω–∞ –ø—Ä–∏—Å—Ç—Ä—ñ–π –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∞ —Ñ–∞–π–ª–∏ `admin_actions.log` —ñ `user_entries.log`.
- –ê–¥–º—ñ–Ω-–º–µ–Ω—é –∑ –∫–æ–º–∞–Ω–¥–∞–º–∏ `/stats`, `/analytics`, `/broadcast`, `/health`, `/download_logs`, `/users_export`, `/logs_tail`, `/feedback_view`, `/feedback_export`, `/ratings`, `/feature_flags`, `/shutdown`, `/restart` (–ª–∏—à–µ –¥–ª—è –∞–¥–º—ñ–Ω–∞).
- `/broadcast` –ø—Ä–∞—Ü—é—î –∑ –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ–º –ø–µ—Ä–µ–≥–ª—è–¥–æ–º —ñ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è–º –ø–µ—Ä–µ–¥ –º–∞—Å–æ–≤–æ—é —Ä–æ–∑—Å–∏–ª–∫–æ—é.
- –ê–¥–º—ñ–Ω-–º–µ–Ω—é –≤—ñ–¥–∫—Ä–∏–≤–∞—î—Ç—å—Å—è –∫–æ–º–∞–Ω–¥–æ—é `/admin` –∞–±–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –¥–ª—è –∞–¥–º—ñ–Ω–∞ –ø—ñ—Å–ª—è `/start`.
- –õ–æ–≥—É–≤–∞–Ω–Ω—è –≤—Ö–æ–¥—ñ–≤ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ —É –∞–±—Å–æ–ª—é—Ç–Ω–∏–π —Ñ–∞–π–ª `logs/user_entries.log` (–∞–≤—Ç–æ—Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó `logs/`).
- –û–∫—Ä–µ–º–∏–π –∞—É–¥–∏—Ç –∞–¥–º—ñ–Ω-–¥—ñ–π —É –∞–±—Å–æ–ª—é—Ç–Ω–∏–π —Ñ–∞–π–ª `logs/admin_actions.log`.
- –ü—Ä–∏ –∫—Ä–∏—Ç–∏—á–Ω—ñ–π –ø–æ–º–∏–ª—Ü—ñ polling –±–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è –∑ –ø–∞—É–∑–æ—é 5 —Å–µ–∫—É–Ω–¥.
- –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–∏—Ö –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å (—ñ—Å—Ç–æ—Ä—ñ—è/–∑–∞–∫—Ä—ñ–ø–ª–µ–Ω—ñ –∞–¥—Ä–µ—Å–∏) —É `data/users.json (–∫–ª—é—á—ñ ‚Äî chat_id)`, –≤–∫–ª—é—á–Ω–æ –∑ `auto_update` (enabled/interval/silent).
- –ó–∞–ø–∏—Å `data/users.json` –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è –∞—Ç–æ–º–∞—Ä–Ω–æ + –∑ backup —É `data/users.json.bak`.
- –ö–µ—à –≥—Ä–∞—Ñ—ñ–∫—ñ–≤ —Å–ø—ñ–ª—å–Ω–∏–π –¥–ª—è –≤—Å—ñ—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ (–±–µ–∑ –¥—É–±–ª—é–≤–∞–Ω–Ω—è —Ä–µ–Ω–¥–µ—Ä—É –¥–ª—è –æ–¥–Ω—ñ—î—ó –∞–¥—Ä–µ—Å–∏).

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é

```text
.
‚îú‚îÄ‚îÄ poweron_bot/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ client.py
‚îÇ   ‚îú‚îÄ‚îÄ main.py
‚îÇ   ‚îî‚îÄ‚îÄ wizard.py
‚îú‚îÄ‚îÄ poweron_admin_user_id.txt.example
‚îú‚îÄ‚îÄ poweron_bot_token.txt.example
‚îú‚îÄ‚îÄ requirements.txt
‚îî‚îÄ‚îÄ README.md
```

## –ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–æ –∑–∞–ø—É—Å–∫—É

### 1) –í—Å—Ç–∞–Ω–æ–≤–∏ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ

```bash
pip install -r requirements.txt
python -m playwright install chromium
```

### Ubuntu 22.04 (–≤–∞–∂–ª–∏–≤–æ –¥–ª—è —Å–∫—Ä—ñ–Ω—à–æ—Ç—ñ–≤)

–Ø–∫—â–æ –Ω–∞ Ubuntu 22.04 –Ω–µ —Ñ–æ—Ä–º—É—î—Ç—å—Å—è —Å–∫—Ä—ñ–Ω—à–æ—Ç, –≤—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å —Å–∏—Å—Ç–µ–º–Ω–∏–π Chromium —ñ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ Playwright:

```bash
sudo apt update
sudo apt install -y chromium-browser
python -m playwright install chromium
python -m playwright install-deps chromium
```

–ó–∞ –ø–æ—Ç—Ä–µ–±–∏ –º–æ–∂–Ω–∞ —è–≤–Ω–æ –∑–∞–¥–∞—Ç–∏ —à–ª—è—Ö –¥–æ –±—Ä–∞—É–∑–µ—Ä–∞:

```bash
export POWERON_BROWSER_PATH="/usr/bin/chromium-browser"
```

> –î–ª—è Termux: –±–æ—Ç –ø—ñ–¥—Ç—Ä–∏–º—É—î HTTP-–∫–ª—ñ—î–Ω—Ç **httpx** –∞–±–æ **requests**. –Ø–∫—â–æ –∑ `httpx` —î –ø—Ä–æ–±–ª–µ–º–∞ —É —Å–µ—Ä–µ–¥–æ–≤–∏—â—ñ, –º–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ `requests` (–≤–∂–µ –¥–æ–¥–∞–Ω–æ –≤ `requirements.txt`).

### 2) –ù–∞–ª–∞—à—Ç—É–π —Ç–æ–∫–µ–Ω –±–æ—Ç–∞

–ü—ñ–¥—Ç—Ä–∏–º—É—é—Ç—å—Å—è 2 —Å–ø–æ—Å–æ–±–∏ (–ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç –º–∞—î –∑–º—ñ–Ω–Ω–∞ –æ—Ç–æ—á–µ–Ω–Ω—è):

1. –ß–µ—Ä–µ–∑ ENV:

```bash
export POWERON_BOT_TOKEN="<YOUR_TELEGRAM_BOT_TOKEN>"
```

2. –ß–µ—Ä–µ–∑ —Ñ–∞–π–ª —É –∫–æ—Ä–µ–Ω—ñ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é:

- –°–∫–æ–ø—ñ—é–π —à–∞–±–ª–æ–Ω `poweron_bot_token.txt.example` —É `poweron_bot_token.txt`.
- –í—Å—Ç–∞–≤ —Ç–æ–∫–µ–Ω –≤ **–æ–¥–∏–Ω —Ä—è–¥–æ–∫** –±–µ–∑ –ª–∞–ø–æ–∫.

> `poweron_bot_token.txt` –º–∞—î –±—É—Ç–∏ –ª–æ–∫–∞–ª—å–Ω–∏–º —Ñ–∞–π–ª–æ–º —ñ –Ω–µ –º–∞—î –∫–æ–º—ñ—Ç–∏—Ç–∏—Å—å —É git.

### 3) (–û–ø—Ü—ñ–π–Ω–æ) –æ–±–º–µ–∂ –¥–æ—Å—Ç—É–ø –¥–æ –±–æ—Ç–∞

```bash
export POWERON_ALLOWED_IDS="123456,987654"
```

–∞–±–æ –¥–æ–∑–≤–æ–ª–∏—Ç–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –ª–∏—à–µ –∞–¥–º—ñ–Ω—É:

```bash
export POWERON_ADMIN_USER_ID="123456"
```

`POWERON_ALLOWED_IDS` –æ–±–º–µ–∂—É—î –¥–æ—Å—Ç—É–ø –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ –¥–æ –±–æ—Ç–∞.
`POWERON_ADMIN_USER_ID` (–∞–±–æ `poweron_admin_user_id.txt`) –≤–∏–∑–Ω–∞—á–∞—î –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –¥–ª—è –∞–¥–º—ñ–Ω-–∫–æ–º–∞–Ω–¥ `/admin`, `/stats`, `/health`, `/broadcast`.
–Ø–∫—â–æ –Ω–µ –∑–∞–¥–∞–≤–∞—Ç–∏ `POWERON_ALLOWED_IDS` ‚Äî –±–æ—Ç –¥–æ—Å—Ç—É–ø–Ω–∏–π —É—Å—ñ–º, —Ö—Ç–æ –º–∞—î –¥–æ—Å—Ç—É–ø –¥–æ –Ω—å–æ–≥–æ –≤ Telegram.

## –ó–∞–ø—É—Å–∫

```bash
python -m poweron_bot.main
```

## –®–≤–∏–¥–∫–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º

```bash
python -m compileall poweron_bot
```


## –ù–æ–≤—ñ –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è (v2)

- `/analytics` ‚Äî –∞–≥—Ä–µ–≥–æ–≤–∞–Ω–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (–∑–∞–ø–∏—Ç–∏/—É—Å–ø—ñ—Ö/–ø–æ–º–∏–ª–∫–∏/–Ω–æ—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó).
- –†–æ–∑—É–º–Ω—ñ –∞–≤—Ç–æ–æ–Ω–æ–≤–ª–µ–Ω–Ω—è: quiet-hours + –ª—ñ–º—ñ—Ç –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å –∑–∞ –≥–æ–¥–∏–Ω—É –¥–ª—è –∑–º–µ–Ω—à–µ–Ω–Ω—è —Å–ø–∞–º—É.
- Fallback –ø—ñ—Å–ª—è –ø–æ–º–∏–ª–∫–∏ —Ä–µ–Ω–¥–µ—Ä—É –º–∞—î –∫–Ω–æ–ø–∫—É `üîÅ –°–ø—Ä–æ–±—É–≤–∞—Ç–∏ —â–µ —Ä–∞–∑`.
- `/users_export` ‚Äî CSV –µ–∫—Å–ø–æ—Ä—Ç —Å—Ç–∞–Ω—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤.
- `/logs_tail` ‚Äî —à–≤–∏–¥–∫–∏–π –ø–µ—Ä–µ–≥–ª—è–¥ –æ—Å—Ç–∞–Ω–Ω—ñ—Ö —Ä—è–¥–∫—ñ–≤ –ª–æ–≥—ñ–≤ –ø—Ä—è–º–æ –≤ Telegram.
- `/feature_flags` ‚Äî –∫–µ—Ä—É–≤–∞–Ω–Ω—è —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª–æ–º –±–µ–∑ –¥–µ–ø–ª–æ—é (—ñ–Ω–ª–∞–π–Ω-–º–µ–Ω—é –∑ –ø–µ—Ä–µ–º–∏–∫–∞—á–∞–º–∏ + `/feature_flags <name> <on|off>`).
- –ê–≤—Ç–æ–æ–Ω–æ–≤–ª–µ–Ω–Ω—è –¥–ª—è –≤–∏–±—Ä–∞–Ω–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–µ–º –∞–¥—Ä–µ—Å (–¥–æ 6).
- –ü–µ—Ä–µ—Ö—ñ–¥ –Ω–∞ SQLite storage (`data/users.sqlite`) –¥–ª—è —Å—Ç–∞–±—ñ–ª—å–Ω—ñ—à–æ–≥–æ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è —Å—Ç–∞–Ω—ñ–≤.

## –ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç–Ω–∏–π roadmap

### Phase 1 (1‚Äì2 —Ç–∏–∂–Ω—ñ) ‚Äî —à–≤–∏–¥–∫–∏–π –≤–∏–¥–∏–º–∏–π –µ—Ñ–µ–∫—Ç

- UX cleanup –≥–æ–ª–æ–≤–Ω–æ–≥–æ –µ–∫—Ä–∞–Ω—É (—î–¥–∏–Ω–∞ –∫–Ω–æ–ø–∫–∞ `üè† –î–æ–¥–æ–º—É`, —á—ñ—Ç–∫—ñ—à—ñ –∫–æ—Ä–æ—Ç–∫—ñ –ø—ñ–¥–∫–∞–∑–∫–∏ –Ω–∞ —Å—Ç–∞—Ä—Ç—ñ).
- –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ: –¥–æ–¥–∞—Ç–∏ p50/p95 –¥–ª—è API, —Ä–µ–Ω–¥–µ—Ä—É —Å–∫—Ä—ñ–Ω—à–æ—Ç–∞ —Ç–∞ –¥–æ—Å—Ç–∞–≤–∫–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å.
- –ù–∞–¥—ñ–π–Ω—ñ—à–∞ —Ä–æ–∑—Å–∏–ª–∫–∞ `/broadcast`: exponential backoff, –æ–∫—Ä–µ–º–∞ –æ–±—Ä–æ–±–∫–∞ `429` —ñ timeout-–ø–æ–º–∏–ª–æ–∫.
- –†–æ–∑—à–∏—Ä–∏—Ç–∏ `/health`: –ø–æ–∫–∞–∑ —á–µ—Ä–≥–∏ –∞–≤—Ç–æ–æ–Ω–æ–≤–ª–µ–Ω—å, —á–∞—Å—Ç–æ—Ç–∏ retry —Ç–∞ —Ç–æ–ø—É —Ç–∏–ø—ñ–≤ –ø–æ–º–∏–ª–æ–∫.

### Phase 2 (2‚Äì4 —Ç–∏–∂–Ω—ñ) ‚Äî —Å—Ç–∞–±—ñ–ª—å–Ω—ñ—Å—Ç—å —ñ –º–∞—Å—à—Ç–∞–±—É–≤–∞–Ω–Ω—è

- –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è API-–ø–æ—à—É–∫—É: —Å–µ—Ä–≤–µ—Ä–Ω–∞ –ø–∞–≥—ñ–Ω–∞—Ü—ñ—è/—Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è –∞–±–æ –ª–æ–∫–∞–ª—å–Ω–∏–π TTL-–∫–µ—à –¥–æ–≤—ñ–¥–Ω–∏–∫—ñ–≤.
- –ü–µ—Ä–µ—Ö—ñ–¥ –Ω–∞ SQLite-first persistence (JSON –∑–∞–ª–∏—à–∏—Ç–∏ —è–∫ snapshot/backup), —â–æ–± –∑–º–µ–Ω—à–∏—Ç–∏ I/O overhead.
- –†–æ–∑—É–º–Ω–∏–π –∫–µ—à –≥—Ä–∞—Ñ—ñ–∫—ñ–≤: adaptive TTL, negative cache –¥–ª—è –ø–æ–º–∏–ª–æ–∫ —Ä–µ–Ω–¥–µ—Ä—É, pre-warm —Ç–æ–ø-–∞–¥—Ä–µ—Å.
- –£–¥–æ—Å–∫–æ–Ω–∞–ª–µ–Ω–Ω—è –∞–≤—Ç–æ–æ–Ω–æ–≤–ª–µ–Ω—å: –ø—Ä–æ—Ñ—ñ–ª—ñ —á–∞—Å—Ç–æ—Ç–∏ —Å–ø–æ–≤—ñ—â–µ–Ω—å —ñ –ø–æ–¥—ñ—î–≤—ñ —Ç—Ä–∏–≥–µ—Ä–∏ –∑–∞–º—ñ—Å—Ç—å –ª–∏—à–µ —ñ–Ω—Ç–µ—Ä–≤–∞–ª—ñ–≤.

### Phase 3 (4‚Äì6 —Ç–∏–∂–Ω—ñ–≤) ‚Äî –ø—Ä–æ–¥—É–∫—Ç–æ–≤–µ –∑—Ä–æ—Å—Ç–∞–Ω–Ω—è

- –†–µ–∂–∏–º –ø–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è –∞–¥—Ä–µ—Å (2+ –∞–¥—Ä–µ—Å–∏): —Ä—ñ–∑–Ω–∏—Ü—è —á–µ—Ä–≥/—Å—Ç–∞–Ω—ñ–≤ –≤ –æ–¥–Ω–æ–º—É –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—ñ.
- –¢–∞—Ä–≥–µ—Ç–æ–≤–∞–Ω—ñ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è: ¬´–ª–∏—à–µ –ø—Ä–∏ –∑–º—ñ–Ω—ñ —á–µ—Ä–≥–∏¬ª, ¬´–ª–∏—à–µ –∫—Ä–∏—Ç–∏—á–Ω—ñ –∑–º—ñ–Ω–∏¬ª, ¬´–ª–∏—à–µ –≤ –æ–±—Ä–∞–Ω—ñ –≥–æ–¥–∏–Ω–∏¬ª.
- –ü–æ–ª—ñ–ø—à–µ–Ω–∏–π —Ñ—ñ–¥–±–µ–∫-—Ü–∏–∫–ª: —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–≤–∞–Ω–∏–π —Ñ—ñ–¥–±–µ–∫ –ø—ñ—Å–ª—è –Ω–∏–∑—å–∫–æ—ó –æ—Ü—ñ–Ω–∫–∏ —Ç–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω—ñ —Ç–µ–≥–∏ –ø—Ä–∏—á–∏–Ω.
- –ê–¥–º—ñ–Ω-–∞–Ω–∞–ª—ñ—Ç–∏–∫–∞: retention, DAU/WAU, –µ—Ñ–µ–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å –∞–≤—Ç–æ–æ–Ω–æ–≤–ª–µ–Ω—å, —Ç—Ä–µ–Ω–¥–∏ –ø–æ–º–∏–ª–æ–∫ –ø–æ –¥–Ω—è—Ö.

### KPI –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—é –ø—Ä–æ–≥—Ä–µ—Å—É

- –ß–∞—Å –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –±–æ—Ç–∞ (p95) < 3—Å –¥–ª—è —Ç–µ–∫—Å—Ç–æ–≤–∏—Ö —Å—Ü–µ–Ω–∞—Ä—ñ—ó–≤.
- –£—Å–ø—ñ—à–Ω—ñ—Å—Ç—å —Ä–µ–Ω–¥–µ—Ä—É –≥—Ä–∞—Ñ—ñ–∫–∞ > 98%.
- –ß–∞—Å—Ç–∫–∞ –∫–æ—Ä–∏—Å–Ω–∏—Ö –∞–≤—Ç–æ—Å–ø–æ–≤—ñ—â–µ–Ω—å (–±–µ–∑ ¬´—à—É–º—É¬ª) > 70%.
- –ó–Ω–∏–∂–µ–Ω–Ω—è –ø–æ–≤—Ç–æ—Ä–Ω–∏—Ö –∑–∞–ø–∏—Ç—ñ–≤ –Ω–∞ —Ç—É —Å–∞–º—É –∞–¥—Ä–µ—Å—É –º—ñ–Ω—ñ–º—É–º –Ω–∞ 20% (–∑–∞ —Ä–∞—Ö—É–Ω–æ–∫ –∫–µ—à—É/UX).

## –õ–æ–≥–∏ —Ç–∞ self-test

- –õ–æ–≥–∏ –ø–∏—à—É—Ç—å—Å—è —É:
  - `/home/ubuntu/Poweron_bot/logs/admin_actions.log`
  - `/home/ubuntu/Poweron_bot/logs/user_entries.log`
- –î–∏—Ä–µ–∫—Ç–æ—Ä—ñ—è `logs/` —Å—Ç–≤–æ—Ä—é—î—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ.
- –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ª–æ–≥—ñ–≤: –≤–∏–∫–æ–Ω–∞–π—Ç–µ `/selftest_logs` –≤—ñ–¥ –∞–¥–º—ñ–Ω-–∞–∫–∞—É–Ω—Ç–∞, –ø–æ—Ç—ñ–º –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ –æ–±–∏–¥–≤–∞ —Ñ–∞–π–ª–∏.
- –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –ª–æ–≥—ñ–≤ —É Telegram: –≤–∏–∫–æ–Ω–∞–π—Ç–µ `/download_logs` –∞–±–æ –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å –∫–Ω–æ–ø–∫—É –≤ –∞–¥–º—ñ–Ω-–ø–∞–Ω–µ–ª—ñ.
- –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ PNG-–≥—Ä–∞—Ñ—ñ–∫–∞: –≤–∏–∫–æ–Ω–∞–π—Ç–µ `/selftest_plot` –≤—ñ–¥ –∞–¥–º—ñ–Ω-–∞–∫–∞—É–Ω—Ç–∞ ‚Äî –±–æ—Ç –Ω–∞–¥—ñ—à–ª–µ —Ç–µ—Å—Ç–æ–≤–∏–π PNG, –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–∏–π —á–µ—Ä–µ–∑ matplotlib backend `Agg`.

## FAQ

- **–Ø–∫ —à–≤–∏–¥–∫–æ –ø–æ–¥–∏–≤–∏—Ç–∏—Å—å –≥—Ä–∞—Ñ—ñ–∫?**
  –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å `‚ö° –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –≥—Ä–∞—Ñ—ñ–∫` —ñ –ø—Ä–æ–π–¥—ñ—Ç—å –∫—Ä–æ–∫–∏: –Ω–∞—Å–µ–ª–µ–Ω–∏–π –ø—É–Ω–∫—Ç ‚Üí –≤—É–ª–∏—Ü—è ‚Üí –±—É–¥–∏–Ω–æ–∫.

- **–©–æ –Ω–∞–¥—Å–∏–ª–∞—î –±–æ—Ç?**
  –°–∫—Ä—ñ–Ω—à–æ—Ç –≥—Ä–∞—Ñ—ñ–∫–∞ –∑ —Å–∞–π—Ç—É —Ç–∞ –∑–Ω–∞—á–µ–Ω–Ω—è `–ì–ü–í` –∑ API.

- **–°–∫—ñ–ª—å–∫–∏ –∞–¥—Ä–µ—Å –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è?**
  –î–æ 6 –≤ —ñ—Å—Ç–æ—Ä—ñ—ó —Ç–∞ –¥–æ 6 —É –∑–∞–∫—Ä—ñ–ø–ª–µ–Ω–∏—Ö.

- **–Ø–∫ –ø—Ä–∞—Ü—é—î –∞–≤—Ç–æ–æ–Ω–æ–≤–ª–µ–Ω–Ω—è?**
  –£ `üéõ –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è` –≤—ñ–¥–∫—Ä–∏–π—Ç–µ –∞–≤—Ç–æ–æ–Ω–æ–≤–ª–µ–Ω–Ω—è, —É–≤—ñ–º–∫–Ω—ñ—Ç—å —ñ–Ω—Ç–µ—Ä–≤–∞–ª —ñ –≤ –º–µ–Ω—é `üìç –ê–¥—Ä–µ—Å–∏ –¥–ª—è –∞–≤—Ç–æ–æ–Ω–æ–≤–ª–µ–Ω–Ω—è` –≤—ñ–¥–º—ñ—Ç—å—Ç–µ –ø–æ—Ç—Ä—ñ–±–Ω—ñ –∞–¥—Ä–µ—Å–∏ (–º–æ–∂–Ω–∞ –∫—ñ–ª—å–∫–∞).

- **–©–æ —Ä–æ–±–∏—Ç—å —Ç–∏—Ö–∏–π —Ä–µ–∂–∏–º?**
  –ù–∞–¥—Å–∏–ª–∞—î –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è —Ç—ñ–ª—å–∫–∏ —è–∫—â–æ –≥—Ä–∞—Ñ—ñ–∫ –∑–º—ñ–Ω–∏–≤—Å—è.

- **–Ø–∫ –∑–∞–ª–∏—à–∏—Ç–∏ –≤—ñ–¥–≥—É–∫ –∞–±–æ –æ—Ü—ñ–Ω–∫—É?**
  –ù–∞ –≥–æ–ª–æ–≤–Ω–æ–º—É –µ–∫—Ä–∞–Ω—ñ –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å `üìù –í—ñ–¥–≥—É–∫` –∞–±–æ `‚≠ê –û—Ü—ñ–Ω–∫–∞` —ñ –æ–±–µ—Ä—ñ—Ç—å –∑–Ω–∞—á–µ–Ω–Ω—è 1..5. –û—Ü—ñ–Ω–∫—É –º–æ–∂–Ω–∞ –∑–∞–ª–∏—à–∏—Ç–∏ –æ–¥–∏–Ω —Ä–∞–∑.

## –ü–æ—à–∏—Ä–µ–Ω—ñ –ø—Ä–æ–±–ª–µ–º–∏

- **`Set POWERON_BOT_TOKEN or create poweron_bot_token.txt`**  
  –ù–µ –∑–∞–¥–∞–Ω–æ —Ç–æ–∫–µ–Ω —á–µ—Ä–µ–∑ ENV —ñ –≤—ñ–¥—Å—É—Ç–Ω—ñ–π —Ñ–∞–π–ª `poweron_bot_token.txt`.

- **Playwright –Ω–µ –∑–∞–ø—É—Å–∫–∞—î Chromium (–æ—Å–æ–±–ª–∏–≤–æ Ubuntu 22.04)**  
  –í–∏–∫–æ–Ω–∞–π: `python -m playwright install chromium && python -m playwright install-deps chromium`, –≤—Å—Ç–∞–Ω–æ–≤–∏ `chromium-browser` —ñ –∑–∞ –ø–æ—Ç—Ä–µ–±–∏ –∑–∞–¥–∞–π `POWERON_BROWSER_PATH=/usr/bin/chromium-browser`.

- **`ModuleNotFoundError` –Ω–∞ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—è—Ö**  
  –ü–µ—Ä–µ–≤—Å—Ç–∞–Ω–æ–≤–∏ –ø–∞–∫–µ—Ç–∏: `pip install -r requirements.txt`.


## –Ü–Ω—Ç–µ—Ä—Ñ–µ–π—Å

- –ù–∞ –≥–æ–ª–æ–≤–Ω–æ–º—É –µ–∫—Ä–∞–Ω—ñ reply-–º–µ–Ω—é: **"‚ö° –ì—Ä–∞—Ñ—ñ–∫"**, **"üìå –ê–¥—Ä–µ—Å–∏"**, **"üïò –Ü—Å—Ç–æ—Ä—ñ—è"**, **"üéõ –ù–∞–ª–∞—à—Ç."**, **"üì° –°—Ç–∞—Ç—É—Å"**, **"‚ùì FAQ"**, **"‚≠ê –û—Ü—ñ–Ω–∫–∞"**, **"üìù –í—ñ–¥–≥—É–∫"**, **"üè† –î–æ–¥–æ–º—É"**.
- Inline –∑–∞–ª–∏—à–∏–≤—Å—è –ª–∏—à–µ —Ç–∞–º, –¥–µ —Ü–µ –∫—Ä–∏—Ç–∏—á–Ω–æ: –≤–∏–±—ñ—Ä –∞–¥—Ä–µ—Å–∏ –∑—ñ —Å–ø–∏—Å–∫—É —Ç–∞ –¥–∏–Ω–∞–º—ñ—á–Ω—ñ –¥—ñ—ó –∑ —ñ—Å—Ç–æ—Ä—ñ—î—é/–∑–∞–∫—Ä—ñ–ø–ª–µ–Ω–∏–º–∏ –∞–¥—Ä–µ—Å–∞–º–∏.
- –ü—ñ—Å–ª—è –≤–∏–±–æ—Ä—É –∞–¥—Ä–µ—Å–∏ –±–æ—Ç –Ω–∞–¥—Å–∏–ª–∞—î –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è **"‚è≥ –û—á—ñ–∫—É–π—Ç–µ..."** –ø—ñ–¥ —á–∞—Å –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –≥—Ä–∞—Ñ—ñ–∫–∞.
- –î–æ—Å—Ç—É–ø–Ω–µ –∞–≤—Ç–æ–æ–Ω–æ–≤–ª–µ–Ω–Ω—è –≥—Ä–∞—Ñ—ñ–∫–∞: **—É–≤—ñ–º–∫–Ω—É—Ç–∏/–≤–∏–º–∫–Ω—É—Ç–∏**, –ø—Ä–µ—Å–µ—Ç–∏ **30—Å / 60—Å / 120—Å**, –≤–ª–∞—Å–Ω–∏–π —ñ–Ω—Ç–µ—Ä–≤–∞–ª (–º—ñ–Ω—ñ–º—É–º 10—Å) —Ç–∞ –≤–∏–±—ñ—Ä –∞–¥—Ä–µ—Å –¥–ª—è –∞–≤—Ç–æ–æ–Ω–æ–≤–ª–µ–Ω–Ω—è.
- –ê–≤—Ç–æ–æ–Ω–æ–≤–ª–µ–Ω–Ω—è –≤ —Ç–∏—Ö–æ–º—É —Ä–µ–∂–∏–º—ñ –Ω–∞–¥—Å–∏–ª–∞—î –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –ª–∏—à–µ –∫–æ–ª–∏ –≥—Ä–∞—Ñ—ñ–∫ –∑–º—ñ–Ω–∏–≤—Å—è (–±–µ–∑ —Å–ø–∞–º—É).
- –î—ñ—î rate-limit –Ω–∞ —á–∞—Å—Ç—ñ –∑–∞–ø–∏—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞, —â–æ–± –Ω–µ –ø–µ—Ä–µ–≤–∞–Ω—Ç–∞–∂—É–≤–∞—Ç–∏ API.
- –ù–∞—Ç–∏—Å–∫–∞–Ω–Ω—è **"üí° –ì—Ä–∞—Ñ—ñ–∫ —Å–≤—ñ—Ç–ª–∞ (–∑–∞ –∞–¥—Ä–µ—Å–æ—é)"** –∑–∞–≤–∂–¥–∏ —Å–∫–∏–¥–∞—î —Å—Ü–µ–Ω–∞—Ä—ñ–π —ñ –ø–æ–≤–µ—Ä—Ç–∞—î –≤ –ø–æ—á–∞—Ç–æ–∫ –ø–æ—à—É–∫—É –∞–¥—Ä–µ—Å–∏.
- –ö–æ–º–∞–Ω–¥–∏ `/status` —ñ `/faq` –¥–æ—Å—Ç—É–ø–Ω—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—É –≤ –±—É–¥—å-—è–∫–∏–π –º–æ–º–µ–Ω—Ç.
- –ê–¥–º—ñ–Ω –º–æ–∂–µ –ø–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –∑–∞–≥–∞–ª—å–Ω—É –æ—Ü—ñ–Ω–∫—É (`/ratings`) —Ç–∞ –ø–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏/–µ–∫—Å–ø–æ—Ä—Ç—É–≤–∞—Ç–∏ –≤—ñ–¥–≥—É–∫–∏ (`/feedback_view`, `/feedback_export`).

## –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–∏–π systemd unit

```ini
[Unit]
Description=PowerON Telegram Bot
After=network.target

[Service]
Type=simple
WorkingDirectory=/home/ubuntu/Poweron_bot
Environment=PYTHONUNBUFFERED=1
ExecStart=/home/ubuntu/Poweron_bot/.venv/bin/python -m poweron_bot.main
Restart=always
RestartSec=5

[Install]
WantedBy=multi-user.target
```

> –í–∞–∂–ª–∏–≤–æ: –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ Python –∑ –≤–∞—à–æ–≥–æ venv —ñ –∑–∞–ø—É—Å–∫ –º–æ–¥—É–ª–µ–º `-m poweron_bot.main`, —â–æ–± —ñ–º–ø–æ—Ä—Ç–∏ –ø—Ä–∞—Ü—é–≤–∞–ª–∏ —Å—Ç–∞–±—ñ–ª—å–Ω–æ.
